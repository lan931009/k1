<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>資料結構課程線上學習平台</title>
  <style>
    :root{
      --bg:#0f172a;
      --panel:#111827;
      --muted:#1f2937;
      --card:#0b1224;
      --text:#e5e7eb;
      --accent:#60a5fa;
      --accent-2:#22d3ee;
      --ok:#34d399;
      --warn:#fbbf24;
      --danger:#fb7185;
      --shadow: 0 10px 25px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 600px at 80% -10%, #1e293b 10%, transparent 60%) , var(--bg);
      color:var(--text);
    }
    a{color:inherit; text-decoration:none}
    .container{max-width:1200px; margin:0 auto; padding:24px}
    /* Topbar */
    .topbar{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(140%) blur(10px);
      background:rgba(17,24,39,0.7);
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .topbar-inner{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:12px 16px}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{
      width:36px; height:36px; border-radius:10px; background:linear-gradient(135deg,var(--accent),var(--accent-2));
      display:grid; place-items:center; color:#00111b; font-weight:900; box-shadow:var(--shadow);
    }
    .brand h1{font-size:18px; margin:0; letter-spacing:.5px}
    .nav{display:flex; flex-wrap:wrap; gap:8px}
    .nav button{
      border:0; padding:10px 14px; border-radius:999px; cursor:pointer;
      background:transparent; color:var(--text); opacity:.9;
    }
    .nav button.active{background:linear-gradient(135deg,#1f2937,#111827); outline:1px solid rgba(255,255,255,0.08)}
    .nav button:hover{opacity:1}
    /* Auth panel */
    .auth{position:relative}
    .auth-summary{display:flex; align-items:center; gap:8px}
    .auth .pill{padding:8px 12px; border-radius:999px; background:#111827; border:1px solid rgba(255,255,255,.08)}
    .dropdown{position:absolute; right:0; top:48px; width:340px; background:var(--panel); border:1px solid rgba(255,255,255,.08); border-radius:14px; box-shadow:var(--shadow); display:none}
    .dropdown.open{display:block}
    .tabs{display:flex; gap:6px; padding:10px}
    .tabs button{flex:1; border:1px solid rgba(255,255,255,.08); background:#0b1224; color:var(--text); padding:8px; border-radius:10px; cursor:pointer}
    .tabs button.active{background:linear-gradient(135deg,#0b1224,#0e1831); outline:1px solid rgba(255,255,255,.10)}
    form{padding:12px 14px; display:grid; gap:10px}
    label{font-size:12px; opacity:.9}
    input{width:100%; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.08); background:#0b1224; color:var(--text)}
    .btn{display:inline-block; padding:10px 14px; border-radius:12px; border:0; cursor:pointer; text-align:center}
    .btn.primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); color:#00111b; font-weight:700}
    .btn.ghost{background:#0b1224; color:var(--text); border:1px solid rgba(255,255,255,.08)}
    /* Sections */
    main{padding:16px}
    section{display:none}
    section.active{display:block}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.06); border-radius:var(--radius); box-shadow:var(--shadow)}
    .hero{min-height:60vh; display:grid; place-items:center; text-align:center; padding:40px}
    .hero h2{font-size:44px; margin:8px 0 4px 0}
    .hero p{opacity:.9; margin:0 0 16px 0}
    .hero h2, .hero p {
  opacity: 0;
  transform: translateY(30px); /* 一開始往下 */
  animation: fadeUp 1s ease-out forwards;
}
.hero h2 { animation-delay: 0.2s; }
.hero p  { animation-delay: 0.6s; }

@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.big-img{width:min(980px,95%); height:320px; border-radius:20px; border:1px ;
     display:grid; place-items:center}
    .guide-grid{display:grid; gap:24px}
    .guide-item{display:flex; gap:20px; align-items:center; background:#0b1224; border-radius:16px; padding:20px; border:1px solid rgba(255,255,255,.06); box-shadow:var(--shadow)}
    .guide-item img{width:220px; height:160px; border-radius:12px; object-fit:cover}
    .guide-text{flex:1}
    .guide-text h3{margin:0 0 8px 0}
    .guide-text p{margin:0 0 12px 0; opacity:.9}
    .progress-list{display:grid; gap:12px}
    .progress-item{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:12px; border-radius:12px; background:#0b1224; border:1px solid rgba(255,255,255,.06)}
    table{width:100%; border-collapse:collapse}
    th, td{padding:10px; border-bottom:1px solid rgba(255,255,255,.06)}
    .game-pad{padding:18px; min-height:220px; border-radius:14px; border:1px dashed rgba(255,255,255,.25); display:grid; place-items:center; opacity:.9}
    footer{opacity:.6; font-size:12px; padding:24px; text-align:center}
  </style>
</head>
<body>
<header class="topbar">
  <div class="topbar-inner container">
    <div class="brand">
      <div class="logo">DS</div>
      <h1>資料結構課程線上學習平台</h1>
    </div>
    <nav class="nav" id="topNav">
      <button data-target="home" class="active">首頁</button>
      <button data-target="guide">導覽</button>
      <button data-target="progress">學習進度</button>
      <button data-target="hanoi">河內塔</button>
      <button data-target="array">陣列</button>
      <button data-target="graph">圖形</button>
      <button data-target="tree">樹狀結構</button>
      <button data-target="search">搜尋</button>
      <button data-target="sort">排序法</button>
      <button data-target="admin" id="adminTab" style="display:none">管理頁</button>
    </nav>
    <div class="auth">
      <div class="auth-summary">
        <span id="userBadge" class="pill">未登入</span>
        <button id="authToggle" class="btn ghost">註冊 / 登入</button>
      </div>
      <div class="dropdown" id="authDropdown">
        <div class="tabs">
          <button id="tabSignup" class="active">註冊</button>
          <button id="tabLogin">登入</button>
        </div>
        <div id="signupPane">
          <form id="signupForm">
            <div><label>使用者姓名</label><input id="suName" required pattern="[A-Za-z0-9]+" /></div>
            <div><label>密碼</label><input id="suPass" type="password" required minlength="8" /></div>
            <button class="btn primary" type="submit">建立帳號</button>
          </form>
        </div>
        <div id="loginPane" style="display:none">
          <form id="loginForm">
            <div><label>使用者姓名</label><input id="liName" required /></div>
            <div><label>密碼</label><input id="liPass" type="password" required /></div>
            <button class="btn primary" type="submit">登入</button>
          </form>
        </div>
        <div class="center" style="padding:8px 12px">
          <button id="logoutBtn" class="btn ghost" style="display:none">登出</button>
        </div>
      </div>
    </div>
  </div>
</header>

<main class="container">

<!-- 首頁 -->
<section id="home" class="active">
  <div class="hero card">
    <div>
      <h2>演算法</h2>
      <p>從經典到進階，用互動遊戲學資料結構與演算法。</p>
      <div class="big-img">
        <canvas id="heroCanvas" width="900" height="280"></canvas>
      </div>
      <div class="center" style="margin-top:16px">
        <button class="btn primary" id="startLearningBtn">開始學習 → 導覽</button>
      </div>
    </div>
  </div>
</section>

<!-- 導覽 -->
<section id="guide">
  <h2>導覽</h2>
  <div class="guide-grid">
    <div class="guide-item">
      <img src="images/a1.jpg" alt="河內塔">
      <div class="guide-text">
        <h3>河內塔</h3>
        <p>經典的遞迴問題，目標是將所有圓盤從起始柱移到目標柱，
並遵守「一次只能移動一個圓盤」與「大盤不能放在小盤上」的規則。
這個題目能幫助學生建立「分治法」與「遞迴思維」，
也是演算法入門的必考範例之一。
</p>
        <div class="center"><button class="btn primary" data-go="hanoi">開始遊戲</button></div>
      </div>
    </div>
    <div class="guide-item">
      <img src="images/a2.jpg" alt="陣列">
      <div class="guide-text">
        <h3>陣列</h3>
        <p>最基本的資料結構之一，用於連續儲存相同型態的資料。
能快速存取元素（O(1)），但在插入與刪除時需要移動大量資料。
常見操作包括索引存取、遍歷、搜尋與排序。
是學習資料結構與演算法的第一步基礎。
</p>
        <div class="center"><button class="btn primary" data-go="array">開始遊戲</button></div>
      </div>
    </div>
    <div class="guide-item">
      <img src="images/a3.jpg" alt="圖形">
      <div class="guide-text">
        <h3>圖形（Graph）</h3>
        <p>由節點（Vertices）與邊（Edges）所組成的結構，
可用於模擬社交網路、地圖導航、網路拓撲等真實世界問題。
常見的演算法包含 BFS（廣度優先搜尋）、DFS（深度優先搜尋）、
以及最短路徑演算法（如 Dijkstra、Floyd-Warshall）。
理解圖的結構能幫助解決複雜的關聯性問題。</p>
        <div class="center"><button class="btn primary" data-go="graph">開始遊戲</button></div>
      </div>
    </div>
    <div class="guide-item">
      <img src="images/a4.jpg" alt="樹狀結構">
      <div class="guide-text">
        <h3>樹狀結構</h3>
        <p>一種階層式結構，從根節點開始分支，常用於資料索引與搜尋。
二元搜尋樹（BST）能有效率地插入、刪除與查找元素，
而平衡樹（如 AVL Tree、Red-Black Tree）能確保操作維持在 O(log n)。
樹狀結構廣泛應用在檔案系統、資料庫索引與語法分析中。
</p>
        <div class="center"><button class="btn primary" data-go="tree">開始遊戲</button></div>
      </div>
    </div>
    <div class="guide-item">
      <img src="images/a5.jpg" alt="搜尋">
      <div class="guide-text">
        <h3>搜尋</h3>
        <p>資料結構中的重要操作之一，用於從集合中找到指定元素。
線性搜尋（Linear Search）簡單直接，但效率較低（O(n)），
而二元搜尋（Binary Search）則能在排序過的陣列中快速找到目標（O(log n)）。
搜尋是資料檢索與演算法分析的基礎。
</p>
        <div class="center"><button class="btn primary" data-go="search">開始遊戲</button></div>
      </div>
    </div>
    <div class="guide-item">
      <img src="images/a6.jpg" alt="排序法">
      <div class="guide-text">
        <h3>排序法</h3>
        <p>透過特定規則將資料依序排列，方便搜尋與管理。
常見方法有泡沫排序、插入排序、選擇排序（O(n^2)），
以及更有效率的快速排序、合併排序、堆積排序（O(n log n)）。
排序演算法不僅是程式設計的基礎，也是演算法設計與效能分析的重點。
</p>
        <div class="center"><button class="btn primary" data-go="sort">開始遊戲</button></div>
      </div>
    </div>
  </div>
</section>

<!-- 其他主題頁：略（跟之前一致，保留遊戲區佔位） -->

<section id="hanoi"><h2>河內塔</h2><div class="game-pad">遊戲區</div></section>
<section id="array"><h2>陣列</h2><div class="game-pad">遊戲區</div></section>
<section id="graph"><h2>圖形</h2><div class="game-pad">遊戲區</div></section>
<section id="tree"><h2>樹狀結構</h2><div class="game-pad">遊戲區</div></section>
<section id="search"><h2>搜尋</h2><div class="game-pad">遊戲區</div></section>
<section id="sort"><h2>排序法</h2><div class="game-pad">遊戲區</div></section>

<section id="admin">
  <h2>管理員：使用者註冊紀錄</h2>
  <div class="card" style="padding:16px">
    <table id="adminUsersTable"><thead><tr><th>帳號</th><th>註冊時間</th><th>密碼</th></tr></thead><tbody></tbody></table>
  </div>
</section>

</main>
<footer>© 2025 資料結構課程線上學習平台</footer>

<script>
// ===== 資料儲存 =====
const LS_KEY = 'ds-learning-users';
const users = JSON.parse(localStorage.getItem(LS_KEY) || '{}');
let currentUser = null;
const $ = (s,r=document)=>r.querySelector(s);
const $$ = (s,r=document)=>Array.from(r.querySelectorAll(s));
const fmtNow=()=>new Date().toLocaleString();
function saveUsers(){ localStorage.setItem(LS_KEY, JSON.stringify(users)); }
function ensureUser(name){
  if(!users[name]) users[name]={password:'',createdAt:fmtNow(),progress:{},history:[]};
}
function setBadge(){ $('#userBadge').textContent=currentUser?`已登入：${currentUser}`:'未登入'; }
function setActive(tab){
  $$('#topNav button').forEach(b=>b.classList.toggle('active',b.dataset.target===tab));
  $$('main section').forEach(sec=>sec.classList.toggle('active',sec.id===tab));
  if(location.hash.replace('#','')!==tab) location.hash=tab;
}
function go(tab){ setActive(tab); }
function refreshAdmin(){
  const isAdmin=currentUser==='Lan99';
  $('#adminTab').style.display=isAdmin?'':'none';
  if(isAdmin){
    const tbody=$('#adminUsersTable tbody'); tbody.innerHTML='';
    Object.entries(users).forEach(([n,u])=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${n}</td><td>${u.createdAt}</td><td>${u.password}</td>`;
      tbody.appendChild(tr);
    });
  }
}
// ===== Nav =====
$$('#topNav button').forEach(b=>b.addEventListener('click',()=>{if(b.dataset.target==='admin'&&currentUser!=='Lan99')return;go(b.dataset.target);}));
// Hash
window.addEventListener('hashchange',()=>{const t=location.hash.replace('#','')||'home';if(t==='admin'&&currentUser!=='Lan99')return;setActive(t);});
// 導覽
$('#startLearningBtn').addEventListener('click',()=>go('guide'));
$$('#guide [data-go]').forEach(b=>b.addEventListener('click',()=>go(b.dataset.go)));
// Auth
const authDD=$('#authDropdown');
$('#authToggle').addEventListener('click',()=>authDD.classList.toggle('open'));
document.addEventListener('click',e=>{if(!authDD.contains(e.target)&&!$('#authToggle').contains(e.target))authDD.classList.remove('open');});
$('#tabSignup').addEventListener('click',()=>{ $('#tabSignup').classList.add('active');$('#tabLogin').classList.remove('active');$('#signupPane').style.display='block';$('#loginPane').style.display='none';});
$('#tabLogin').addEventListener('click',()=>{ $('#tabLogin').classList.add('active');$('#tabSignup').classList.remove('active');$('#signupPane').style.display='none';$('#loginPane').style.display='block';});

// 註冊
$('#signupForm').addEventListener('submit',e=>{
  e.preventDefault();
  const name=$('#suName').value.trim();
  const pass=$('#suPass').value;
  const nameOK=/^[A-Za-z0-9]+$/.test(name);
  const passOK=pass.length>=8&&/[A-Za-z]/.test(pass)&&/[0-9]/.test(pass);
  if(!nameOK){alert('使用者姓名僅能包含英文與數字');return;}
  if(!passOK){alert('密碼需包含英文與數字且至少 8 碼');return;}
  if(users[name]){alert('此帳號已存在');return;}
  users[name]={password:pass,createdAt:fmtNow(),progress:{},history:[]};
  saveUsers();
  alert('註冊成功，請登入');
  $('#tabLogin').click();
});

// 登入
$('#loginForm').addEventListener('submit',e=>{
  e.preventDefault();
  const name=$('#liName').value.trim();
  const pass=$('#liPass').value;
  if(name==='Lan99'&&pass==='97778801a'){
    currentUser=name;setBadge();refreshAdmin();
    authDD.classList.remove('open');$('#logoutBtn').style.display='inline-block';
    go('admin');return;
  }
  if(!users[name]){alert('找不到帳號，請先註冊');return;}
  if(users[name].password!==pass){alert('密碼錯誤');return;}
  currentUser=name;setBadge();refreshAdmin();
  authDD.classList.remove('open');$('#logoutBtn').style.display='inline-block';
  go('guide');
});

// 登出
$('#logoutBtn').addEventListener('click',()=>{
  currentUser=null;setBadge();refreshAdmin();
  $('#logoutBtn').style.display='none';
  go('home');
});

// 初始
setBadge();
const first=location.hash.replace('#','')||'home';
setActive(first);

// ===== 首頁演算法動畫 =====
const canvas=document.getElementById("heroCanvas");
if(canvas){
  const ctx=canvas.getContext("2d");
  const bars=Array.from({length:15},()=>Math.floor(Math.random()*200)+40);
  let t=0;
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const barWidth=40;
    bars.forEach((h,i)=>{
      const x=i*(barWidth+10)+30;
      const offset=Math.sin(t/10+i)*15;
      ctx.fillStyle="#60a5fa";
      ctx.fillRect(x,canvas.height-h-offset,barWidth,h+offset);
      ctx.fillStyle="#22d3ee";
      ctx.fillRect(x,canvas.height-h-5-offset,barWidth,5);
    });
    t++;
    requestAnimationFrame(draw);
  }
  draw();
}
</script>
</body>
</html>

